title: "RELATE Test Quiz"
description: |

    # RELATE Test Quiz

    Yadda yadda.

rules:
  start:
    -
      if_before: end_week 1
      if_has_role: [student, ta, instructor]
      if_has_fewer_sessions_than: 2
      may_start_new_session: True
      may_list_existing_sessions: True

    -
      may_start_new_session: False
      may_list_existing_sessions: True

  access:
     -
       if_before: end_week 2
       permissions: [view, modify, see_correctness]

     -
       permissions: [view, modify, see_correctness, see_answer]

  grading:
    -
      if_completed_before: end_week 1
      grade_identifier: la_quiz
      grade_aggregation_strategy: max_grade
      credit_percent: 100

    -
      if_completed_before: end_week 2
      grade_identifier: la_quiz
      grade_aggregation_strategy: max_grade
      credit_percent: 50

    -
      grade_identifier: null

groups:
 - id: intro
   pages:

    -
        type: Page
        id: welcome
        content: |

            # Welcome to the test quiz for RELATE!

            Don't be scared.

 - id: quiz
   pages:

    -
        type: TextQuestion
        id: eigvec
        value: 2
        prompt: |

            # What's an eigenvector?

            Yadda ___________________ yadda.

        answers:

          - <plain>matrix
          - <case_sens_plain>Eigenmatrix
          - <regex>(?:linear\s+)?\s*map
          - <case_sens_regex>(?:operator\s+)?\s*map

    -
        type: repo:simple_questions.MyTextQuestion
        id: eigval
        title: Eigenvalues
        prompt: |

            # Eigenvalues

            What's an eigenvalue?

        answers:

          - scalar
          - number

    -
        type: TextQuestion
        id: neumann
        value: 5
        prompt: |

          # Neumann series

            What's $\operatorname{Id} + A + A^2 +A^3+\cdots$?

        answers:

          - <sym_expr>1/(1-A)

    -
        type: ChoiceQuestion
        id: lsq
        value: 1
        shuffle: True
        prompt: |

            # Least squares problems

            Let $m\ge n$ and $\boldsymbol A$ be an $m\times n$ matrix. Which of the
            following conditions suffices to guarantee that
            the least squares system $\boldsymbol A \boldsymbol x\cong \boldsymbol b$
            has a *unique* solution?

        choices:

          - Always
          - When $\operatorname{rank}(\boldsymbol A)=m$
          - ~CORRECT~ When $\operatorname{rank}(\boldsymbol A)=n$
          - When $\boldsymbol b$ lies in $\operatorname{span}(\boldsymbol A)$
          - This is a really long option, but *certainly* not the correct one.

            Instead, it tests whether Markdown works in choice questions.

    -
        type: ChoiceQuestion
        id: krylov
        value: 2
        prompt: |

            # Krylov-space methods

            What form of a matrix is produced by Arnoldi iteration?

        choices:

          - ~CORRECT~ Upper Hessenberg form
          - Diagonal
          - Schur form
          - Tridiagonal form

    -
        type: PythonCodeQuestion
        id: addition
        access_rules:
            add_permissions:
                - change_answer
        value: 1
        timeout: 0.5
        prompt: |

            # Adding two numbers in Python

            Your code will receive two variables, *a* and *b*. Compute their sum and
            assign it to *c*.

        setup_code: |
            import random

            a = random.uniform(-10, 10)
            b = random.uniform(-10, 10)

        names_for_user: [a, b]

        names_from_user: [c]

        test_code: |
            if not isinstance(c, float):
                feedback.finish(0, "Your computed c is not a float.")

            correct_c = a + b
            rel_err = abs(correct_c-c)/abs(correct_c)

            if rel_err < 1e-7:
                feedback.finish(1, "Your computed c was correct.")
            else:
                feedback.finish(0, "Your computed c was incorrect.")

        correct_code: |

            c = a + b

    -
        type: PythonCodeQuestionWithHumanTextFeedback
        id: pymult
        access_rules:
            add_permissions:
                - change_answer
        value: 3
        human_feedback_value: 2
        timeout: 0.5
        data_files:
            - "question-data/random-data.npy"

        prompt: |

            # Multiplying two numbers in Python

            Your code will receive two variables, *a* and *b*. Compute their product and
            assign it to *c*.

        setup_code: |
            import random

            a = random.uniform(-10, 10)
            b = random.uniform(-10, 10)

            from io import BytesIO
            bio = BytesIO(data_files["question-data/random-data.npy"])

            import numpy as np
            data = np.load(bio)

        names_for_user: [a, b, data]

        names_from_user: [c]

        test_code: |
            if not isinstance(c, float):
                feedback.finish(0, "Your computed c is not a float.")

            correct_c = a * b
            rel_err = abs(correct_c-c)/abs(correct_c)

            if rel_err < 1e-7:
                feedback.finish(1, "Your computed c was correct.")
            else:
                feedback.finish(0, "Your computed c was incorrect.")

        correct_code: |

            c = a * b

        rubric: |

            The code has to be squeaky-clean.

        initial_code: |

            # Assign the product value to c.
            c = ...

    -
        type: FileUploadQuestion
        id: proof
        value: 5
        maximum_megabytes: 0.5
        prompt: |

            # Pythagorean theorem

            Prove that $$\|a\|^2 +\|b\|^2=\|a + b\|^2$$ if $a\cdot b$ = 0.

            In the file upload box below, provide a PDF with your writeup.

        mime_types:

            - application/pdf

        rubric: |

            A full-credit solution needs to:

            * Use the inner product to make the argument (30%)
            * Be readable (30%)
            * Argue correctly (30%)
            * Contain no formal mistakes (10%)

    -
        type: HumanGradedTextQuestion
        id: hgtext
        value: 5
        widget: "editor:yaml"
        validators:

            -
                type: relate_page
                page_type: ChoiceQuestion

        prompt: |

            [JINJA]

            # Submit an exam question

            Submit your practice exam question in the box below.

            {% from "macros.jinja" import collapsible %}
            {% call collapsible("Instructions", id="instr") %}

            Use this pattern as a starting point:
            ```
            type: ChoiceQuestion
            id: myquestion
            shuffle: True
            prompt: |

                # What is your favorite number?

                There are many beautiful numbers. What's your
                favorite one?

            choices:

              - "1"
              - "2"
              - ~CORRECT~ 15
              - ~CORRECT~ $\pi$
              - $\sqrt 2$
            ```

            A few comments on how the questions are written:

            * You just need to change the `prompt` and the `choices`.
              Leave everything else as it is.
            * If you like, you can assign an `id`. This field must be all
              lower-case alphanumeric, no spaces. Underscores `_` are allowed.
            * Bare numbers as answer choices must be enclosed in quotes.
            * Mark the correct answer with a `~CORRECT~` tag.
            * Everything is formatted using [Markdown](https://guides.github.com/features/mastering-markdown/).
              You may use LaTeX math, enclosed in `$...$` for in-line math and
              `$$...$$` for display math.
            * Make sure to keep the indentation in place, otherwise the question
              won't be accepted by RELATE.
            * If you'd like to see what your question will look like, you can play with it
              [here](../../../sandbox/page/).

            You will receive the extra credit for your submitted question if we
            determine that you have done an 'honest job' trying to create a
            good exam question--basically if we can tell that you've put some
            work into your question.  For example, just copying and pasting a
            quiz question and changing the numbers slightly does not count. You
            can look for inspiration in the quizzes, though. Other sources of
            inspiration include the notes, the textbook and the
            demos--basically any fact that we've learned can be turned into a
            good question. Try to avoid True/False questions--those are very
            easy to guess and therefore not often good. Try to come up with
            good, confusing, plausible-sounding (but wrong) alternatives.

            {% endcall %}

            Please try to emphasize the part of the class that will be on the
            second midterm--that is to say, everything from orthogonality onward.

        rubric: |

            (None yet)

    -
        type: SurveyTextQuestion
        id: fear
        widget: textarea
        prompt: |

            # Psychology Survey

            What's your biggest fear?

    -
        type: SurveyChoiceQuestion
        id: age_group
        prompt: |

            # Age

            How old are you?

        choices:

            - 0-10 years
            - 11-20 years
            - 21-30 years
            - 31-40 years
            - 41-50 years
            - 51-60 years
            - 61-70 years
            - 71-80 years
            - 81-90 years
            - older



completion_text: |

    # See you in class!

    Thanks for completing the linear algebra quiz.
